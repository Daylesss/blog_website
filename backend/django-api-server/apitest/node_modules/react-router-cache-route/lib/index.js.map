{"version":3,"file":"index.js","sources":["../src/helpers/base/is.js","../src/helpers/base/try/index.js","../src/helpers/base/globalThis.js","../src/helpers/utils.js","../src/helpers/saveScrollPosition.js","../src/core/manager.js","../src/core/context.js","../src/core/CacheComponent.js","../src/core/Updatable/Freeze.js","../src/core/Updatable/index.js","../src/components/CacheRoute.js","../src/components/SwitchFragment.js","../src/components/CacheSwitch.js"],"sourcesContent":["// 值类型判断 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\nexport const isUndefined = val => typeof val === 'undefined'\n\nexport const isNull = val => val === null\n\nexport const isFunction = val => typeof val === 'function'\n\nexport const isString = val => typeof val === 'string'\n\nexport const isExist = val => !(isUndefined(val) || isNull(val))\n\nexport const isArray = val => val instanceof Array\n\nexport const isNaN = val => val !== val\n\nexport const isNumber = val => typeof val === 'number' && !isNaN(val)\n// 值类型判断 -------------------------------------------------------------\n","import { isString, isExist, isUndefined, isFunction, isNumber } from '../is'\n\nexport const get = (obj, keys = [], defaultValue) => {\n  try {\n    if (isNumber(keys)) {\n      keys = String(keys)\n    }\n    let result = (isString(keys) ? keys.split('.') : keys).reduce(\n      (res, key) => res[key],\n      obj\n    )\n    return isUndefined(result) ? defaultValue : result\n  } catch (e) {\n    return defaultValue\n  }\n}\n\nexport const run = (obj, keys = [], ...args) => {\n  keys = isString(keys) ? keys.split('.') : keys\n\n  const func = get(obj, keys)\n  const context = get(obj, keys.slice(0, -1))\n\n  return isFunction(func) ? func.call(context, ...args) : func\n}\n\nexport const value = (...values) =>\n  values.reduce(\n    (value, nextValue) => (isUndefined(value) ? run(nextValue) : run(value)),\n    undefined\n  )\n","const getImplementation = () => {\n  if (typeof self !== 'undefined') {\n    return self\n  }\n  if (typeof window !== 'undefined') {\n    return window\n  }\n  if (typeof global !== 'undefined') {\n    return global\n  }\n\n  throw new Error('unable to locate global object')\n}\n\nconst implementation = getImplementation()\n\nconst getGlobal = () => {\n  if (\n    typeof global !== 'object' ||\n    !global ||\n    global.Math !== Math ||\n    global.Array !== Array\n  ) {\n    return implementation\n  }\n  return global\n}\n\nconst globalThis = getGlobal()\n\nexport default globalThis\n","import { isArray } from './base/is'\n\nexport const nextTick = func => Promise.resolve().then(func)\n\nexport const flatten = array =>\n  array.reduce(\n    (res, item) => [...res, ...(isArray(item) ? flatten(item) : [item])],\n    []\n  )\n\n/**\n * [钳子] 用来将数字限制在给定范围内\n * @param {Number} value 被限制值\n * @param {Number} min 最小值\n * @param {Number} max 最大值\n */\nexport const clamp = (value, min, max = Number.MAX_VALUE) => {\n  if (value < min) {\n    return min\n  }\n\n  if (value > max) {\n    return max\n  }\n\n  return value\n}\n\nexport const ObjectValues = (object) => {\n  const res = []\n  for (let key in object) {\n    res.push(object[key])\n  }\n  return res\n}\n","import root from './base/globalThis'\nimport { get, run, value } from './base/try'\nimport { isArray, isFunction, isExist } from './base/is'\nimport { flatten } from './utils'\n\nconst body = get(root, 'document.body')\nconst screenScrollingElement = get(\n  root,\n  'document.scrollingElement',\n  get(root, 'document.documentElement', {})\n)\n\nfunction isScrollableNode(node = {}) {\n  if (!isExist(node)) {\n    return false\n  }\n\n  return (\n    node.scrollWidth > node.clientWidth || node.scrollHeight > node.clientHeight\n  )\n}\n\nfunction getScrollableNodes(from) {\n  if (!isFunction(get(root, 'document.getElementById'))) {\n    return []\n  }\n\n  return [...value(run(from, 'querySelectorAll', '*'), []), from].filter(\n    isScrollableNode\n  )\n}\n\nexport default function saveScrollPosition(from) {\n  const nodes = [\n    ...new Set([\n      ...flatten((!isArray(from) ? [from] : from).map(getScrollableNodes)),\n      ...[screenScrollingElement, body].filter(isScrollableNode)\n    ])\n  ]\n\n  const saver = nodes.map(node => [\n    node,\n    {\n      x: node.scrollLeft,\n      y: node.scrollTop\n    }\n  ])\n\n  return function revert() {\n    saver.forEach(([node, { x, y }]) => {\n      node.scrollLeft = x\n      node.scrollTop = y\n    })\n  }\n}\n","import CacheComponent from './CacheComponent'\nimport { get, run } from '../helpers'\n\nconst __components = {}\n\nconst getCachedComponentEntries = () =>\n  Object.entries(__components).filter(\n    ([, cache]) =>\n      cache instanceof CacheComponent\n        ? cache.state.cached\n        : Object.values(cache).some(cache => cache.state.cached)\n  )\n\nexport const getCache = () => ({ ...__components })\n\nexport const register = (key, component) => {\n  __components[key] = component\n}\n\nexport const remove = key => {\n  delete __components[key]\n}\n\nconst dropComponent = component => run(component, 'reset')\n\nexport const dropByCacheKey = key => {\n  const cache = get(__components, [key])\n\n  if (!cache) {\n    return\n  }\n\n  if (cache instanceof CacheComponent) {\n    dropComponent(cache)\n  } else {\n    Object.values(cache).forEach(dropComponent)\n  }\n}\n\nconst refreshComponent = component => run(component, 'refresh');\n\nexport const refreshByCacheKey = key => {\n  const cache = get(__components, [key]);\n\n  if (!cache) {\n    return;\n  }\n\n  if (cache instanceof CacheComponent) {\n    refreshComponent(cache);\n  } else {\n    Object.values(cache).forEach(refreshComponent);\n  }\n};\n\nexport const clearCache = () => {\n  getCachedComponentEntries().forEach(([key]) => dropByCacheKey(key))\n}\n\nexport const getCachingKeys = () =>\n  getCachedComponentEntries().map(([key]) => key)\n\nexport const getCachingComponents = () =>\n  getCachedComponentEntries().reduce(\n    (res, [key, cache]) => ({\n      ...res,\n      ...(cache instanceof CacheComponent\n        ? { [key]: cache }\n        : Object.entries(cache).reduce(\n            (res, [pathname, cache]) => ({\n              ...res,\n              [`${key}.${pathname}`]: cache\n            }),\n            {}\n          ))\n    }),\n    {}\n  )\n","import { useEffect, useContext, useRef } from 'react'\nimport createContext from 'mini-create-react-context'\n\nimport { isArray, isFunction, run } from '../helpers'\n\nconst context = createContext()\n\nexport default context\nexport const { Provider, Consumer } = context\n\nfunction useCacheRoute(lifecycleName, effect, deps = []) {\n  if (!isFunction(useContext)) {\n    return\n  }\n\n  const effectRef = useRef(() => null)\n  effectRef.current = effect\n\n  const cacheLifecycles = useContext(context)\n  useEffect(() => {\n    const off = run(cacheLifecycles, 'on', lifecycleName, () => {\n      run(effectRef.current)\n    })\n\n    return () => run(off)\n  }, [])\n}\nexport const useDidCache = useCacheRoute.bind(null, 'didCache')\nexport const useDidRecover = useCacheRoute.bind(null, 'didRecover')\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport {\r\n  run,\r\n  get,\r\n  value,\r\n  isExist,\r\n  isFunction,\r\n  saveScrollPosition,\r\n  ObjectValues\r\n} from '../helpers'\r\nimport * as manager from './manager'\r\nimport { Provider as CacheRouteProvider } from './context'\r\n\r\nconst isUsingNewLifecycle = isExist(React.forwardRef)\r\n\r\nexport const COMPUTED_UNMATCH_KEY = '__isComputedUnmatch'\r\nexport const isMatch = match =>\r\n  isExist(match) && get(match, COMPUTED_UNMATCH_KEY) !== true\r\n\r\nconst getDerivedStateFromProps = (nextProps, prevState) => {\r\n  let { match: nextPropsMatch, when = 'forward' } = nextProps\r\n\r\n  /**\r\n   * Note:\r\n   * Turn computedMatch from CacheSwitch to a real null value\r\n   *\r\n   * 将 CacheSwitch 计算得到的 computedMatch 值转换为真正的 null\r\n   */\r\n  if (!isMatch(nextPropsMatch)) {\r\n    nextPropsMatch = null\r\n  }\r\n\r\n  if (!prevState.cached && nextPropsMatch) {\r\n    return {\r\n      cached: true,\r\n      matched: true\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Determines whether it needs to cancel the cache based on the next unmatched props action\r\n   *\r\n   * 根据下个未匹配状态动作决定是否需要取消缓存\r\n   */\r\n  if (prevState.matched && !nextPropsMatch) {\r\n    const nextAction = get(nextProps, 'history.action')\r\n\r\n    let __cancel__cache = false\r\n\r\n    if (isFunction(when)) {\r\n      __cancel__cache = !when(nextProps)\r\n    } else {\r\n      switch (when) {\r\n        case 'always':\r\n          break\r\n        case 'back':\r\n          if (['PUSH', 'REPLACE'].includes(nextAction)) {\r\n            __cancel__cache = true\r\n          }\r\n\r\n          break\r\n        case 'forward':\r\n        default:\r\n          if (nextAction === 'POP') {\r\n            __cancel__cache = true\r\n          }\r\n      }\r\n    }\r\n\r\n    if (__cancel__cache) {\r\n      return {\r\n        cached: false,\r\n        matched: false\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    matched: !!nextPropsMatch\r\n  }\r\n}\r\n\r\nexport default class CacheComponent extends Component {\r\n  static __name = 'CacheComponent'\r\n\r\n  static propsTypes = {\r\n    history: PropTypes.object.isRequired,\r\n    match: PropTypes.object.isRequired,\r\n    children: PropTypes.func.isRequired,\r\n    className: PropTypes.string,\r\n    when: PropTypes.oneOfType([\r\n      PropTypes.func,\r\n      PropTypes.oneOf(['forward', 'back', 'always'])\r\n    ]),\r\n    behavior: PropTypes.func,\r\n    unmount: PropTypes.bool,\r\n    saveScrollPosition: PropTypes.bool\r\n  }\r\n\r\n  static defaultProps = {\r\n    when: 'forward',\r\n    unmount: false,\r\n    saveScrollPosition: false,\r\n    behavior: cached =>\r\n      cached\r\n        ? {\r\n            style: {\r\n              display: 'none'\r\n            }\r\n          }\r\n        : undefined\r\n  }\r\n\r\n  constructor(props, ...args) {\r\n    super(props, ...args)\r\n\r\n    this.__cacheCreateTime = Date.now()\r\n    this.__cacheUpdateTime = this.__cacheCreateTime\r\n    if (props.cacheKey) {\r\n      const cacheKey = run(props.cacheKey, undefined, props)\r\n      if (props.multiple) {\r\n        const { href } = props\r\n        manager.register(cacheKey, {\r\n          ...manager.getCache()[cacheKey],\r\n          [href]: this\r\n        })\r\n      } else {\r\n        manager.register(cacheKey, this)\r\n      }\r\n    }\r\n\r\n    if (typeof document !== 'undefined') {\r\n      const cacheKey = run(props.cacheKey, undefined, props)\r\n      this.__placeholderNode = document.createComment(\r\n        ` Route cached ${cacheKey ? `with cacheKey: \"${cacheKey}\" ` : ''}`\r\n      )\r\n    }\r\n\r\n    this.state = getDerivedStateFromProps(props, {\r\n      cached: false,\r\n      matched: false,\r\n      key: Math.random()\r\n    })\r\n  }\r\n\r\n  cacheLifecycles = {\r\n    __listener: {},\r\n    __didCacheListener: {},\r\n    __didRecoverListener: {},\r\n    on: (eventName, func) => {\r\n      const id = Math.random()\r\n      const listenerKey = `__${eventName}Listener`\r\n      this.cacheLifecycles[listenerKey][id] = func\r\n\r\n      return () => {\r\n        delete this.cacheLifecycles[listenerKey][id]\r\n      }\r\n    },\r\n    didCache: listener => {\r\n      this.cacheLifecycles.__listener['didCache'] = listener\r\n    },\r\n    didRecover: listener => {\r\n      this.cacheLifecycles.__listener['didRecover'] = listener\r\n    }\r\n  }\r\n\r\n  /**\r\n   * New lifecycle for replacing the `componentWillReceiveProps` in React 16.3 +\r\n   * React 16.3 + 版本中替代 componentWillReceiveProps 的新生命周期\r\n   */\r\n  static getDerivedStateFromProps = isUsingNewLifecycle\r\n    ? getDerivedStateFromProps\r\n    : undefined\r\n\r\n  /**\r\n   * Compatible React 16.3 -\r\n   * 兼容 React 16.3 - 版本\r\n   */\r\n  componentWillReceiveProps = !isUsingNewLifecycle\r\n    ? nextProps => {\r\n        const nextState = getDerivedStateFromProps(nextProps, this.state)\r\n\r\n        this.setState(nextState)\r\n      }\r\n    : undefined\r\n\r\n  __parentNode\r\n  __placeholderNode\r\n  __revertScrollPos\r\n  injectDOM = () => {\r\n    try {\r\n      run(\r\n        this.__parentNode,\r\n        'insertBefore',\r\n        this.wrapper,\r\n        this.__placeholderNode\r\n      )\r\n      run(this.__parentNode, 'removeChild', this.__placeholderNode)\r\n    } catch (err) {\r\n      // nothing\r\n    }\r\n  }\r\n\r\n  ejectDOM = () => {\r\n    try {\r\n      const parentNode = get(this.wrapper, 'parentNode')\r\n      this.__parentNode = parentNode\r\n\r\n      run(\r\n        this.__parentNode,\r\n        'insertBefore',\r\n        this.__placeholderNode,\r\n        this.wrapper\r\n      )\r\n      run(this.__parentNode, 'removeChild', this.wrapper)\r\n    } catch (err) {\r\n      // nothing\r\n    }\r\n  }\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (!prevState.cached || !this.state.cached) {\r\n      return\r\n    }\r\n\r\n    if (prevState.matched === true && this.state.matched === false) {\r\n      if (this.props.unmount) {\r\n        this.ejectDOM()\r\n      }\r\n      this.__cacheUpdateTime = Date.now()\r\n      ObjectValues(this.cacheLifecycles.__didCacheListener).forEach(func => {\r\n        run(func)\r\n      })\r\n      return run(this, 'cacheLifecycles.__listener.didCache')\r\n    }\r\n\r\n    if (prevState.matched === false && this.state.matched === true) {\r\n      if (this.props.saveScrollPosition) {\r\n        run(this.__revertScrollPos)\r\n      }\r\n      this.__cacheUpdateTime = Date.now()\r\n      ObjectValues(this.cacheLifecycles.__didRecoverListener).forEach(func => {\r\n        run(func)\r\n      })\r\n      return run(this, 'cacheLifecycles.__listener.didRecover')\r\n    }\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    const willRecover =\r\n      this.state.matched === false && nextState.matched === true\r\n    const willDrop = this.state.cached === true && nextState.cached === false\r\n    const shouldUpdate =\r\n      this.state.matched ||\r\n      nextState.matched ||\r\n      this.state.cached !== nextState.cached\r\n\r\n    if (shouldUpdate) {\r\n      if ((this.props.unmount && willDrop) || willRecover) {\r\n        this.injectDOM()\r\n      }\r\n\r\n      if (!(willDrop || willRecover) && this.props.saveScrollPosition) {\r\n        this.__revertScrollPos = saveScrollPosition(\r\n          this.props.unmount ? this.wrapper : undefined\r\n        )\r\n      }\r\n    }\r\n\r\n    return shouldUpdate\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const { unmount, href, multiple } = this.props\r\n    const cacheKey = run(this.props, 'cacheKey', this.props)\r\n\r\n    if (multiple) {\r\n      const cache = { ...manager.getCache()[cacheKey] }\r\n\r\n      delete cache[href]\r\n\r\n      if (Object.keys(cache).length === 0) {\r\n        manager.remove(cacheKey)\r\n      } else {\r\n        manager.register(cacheKey, cache)\r\n      }\r\n    } else {\r\n      manager.remove(cacheKey)\r\n    }\r\n\r\n    if (unmount) {\r\n      this.injectDOM()\r\n    }\r\n  }\r\n\r\n  reset = () => {\r\n    delete this.__revertScrollPos\r\n\r\n    this.setState({\r\n      cached: false\r\n    })\r\n  }\r\n\r\n  refresh = () => {\r\n    delete this.__revertScrollPos;\r\n\r\n    this.setState({\r\n      key: Math.random()\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { matched, cached, key } = this.state\r\n    const { className: propsClassName = '', behavior, children } = this.props\r\n    const { className: behaviorClassName = '', ...behaviorProps } = value(\r\n      run(behavior, undefined, !matched),\r\n      {}\r\n    )\r\n    const className = run(`${propsClassName} ${behaviorClassName}`, 'trim')\r\n    const hasClassName = className !== ''\r\n\r\n    return cached ? (\r\n      <div\r\n        key={key}\r\n        className={hasClassName ? className : undefined}\r\n        {...behaviorProps}\r\n        ref={wrapper => {\r\n          this.wrapper = wrapper\r\n        }}\r\n      >\r\n        <CacheRouteProvider value={this.cacheLifecycles}>\r\n          {run(children, undefined, this.cacheLifecycles)}\r\n        </CacheRouteProvider>\r\n      </div>\r\n    ) : null\r\n  }\r\n}\r\n","// Fork from react-freeze\r\n// https://github.com/software-mansion/react-freeze/blob/main/src/index.tsx\r\nimport React, { Component, lazy, Suspense, Fragment } from 'react'\r\nimport { globalThis, isUndefined, isFunction } from '../../helpers'\r\n\r\nconst isSupported = isFunction(lazy) && !isUndefined(Suspense)\r\nconst notSupportSuspense = !isSupported\r\n\r\nclass Suspender extends Component {\r\n  promiseCache = {}\r\n  render() {\r\n    const { freeze, children } = this.props\r\n    const { promiseCache } = this\r\n\r\n    if (freeze && !promiseCache.promise) {\r\n      promiseCache.promise = new Promise((resolve) => {\r\n        promiseCache.resolve = resolve\r\n      })\r\n      throw promiseCache.promise\r\n    } else if (freeze) {\r\n      throw promiseCache.promise\r\n    } else if (promiseCache.promise) {\r\n      promiseCache.resolve()\r\n      promiseCache.promise = undefined\r\n    }\r\n\r\n    return <Fragment>{children}</Fragment>\r\n  }\r\n}\r\n\r\nexport default function Freeze({ freeze, children, placeholder = null }) {\r\n  if (notSupportSuspense) return children\r\n\r\n  return (\r\n    <Suspense fallback={placeholder}>\r\n      <Suspender freeze={freeze}>{children}</Suspender>\r\n    </Suspense>\r\n  )\r\n}\r\n","import React, { Component, Suspense } from 'react'\nimport ReactFreeze from './Freeze'\nimport PropTypes from 'prop-types'\n\nimport { run, get } from '../../helpers'\n\nconst isSusSupported = !!Suspense\nconst Freeze = isSusSupported ? ReactFreeze : ({ children }) => children\n\nclass DelayFreeze extends Component {\n  static propsTypes = {\n    freeze: PropTypes.bool.isRequired\n  }\n  state = {\n    freeze: false,\n  }\n  constructor(props) {\n    super(props)\n    this.state = {\n      freeze: props.freeze,\n    }\n  }\n\n  freezeTimeout = null\n  shouldComponentUpdate = ({ freeze }) => {\n    const currentFreeze = this.props.freeze\n\n    if (freeze !== currentFreeze) {\n      clearTimeout(this.freezeTimeout)\n      this.freezeTimeout = setTimeout(() => {\n        this.setState({\n          freeze,\n        })\n      }, 1000)\n    }\n\n    return true\n  }\n  render = () => (\n    <Freeze freeze={!this.props.freeze ? false : this.state.freeze}>\n      {run(this.props, 'children')}\n    </Freeze>\n  )\n}\n\nclass Updatable extends Component {\n  static propsTypes = {\n    when: PropTypes.bool.isRequired,\n  }\n\n  render = () => run(this.props, 'children')\n  shouldComponentUpdate = ({ when }) => when\n}\n\nexport default ({ autoFreeze = true, ...props }) => (\n  <DelayFreeze freeze={autoFreeze && !props.when}>\n    <Updatable {...props} />\n  </DelayFreeze>\n)\n","import React, { Component, Fragment } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Route } from 'react-router-dom'\r\n\r\nimport CacheComponent, { isMatch } from '../core/CacheComponent'\r\nimport Updatable from '../core/Updatable'\r\nimport { run, isExist, isNumber, clamp } from '../helpers'\r\n\r\nconst isEmptyChildren = children => React.Children.count(children) === 0\r\nconst isFragmentable = isExist(Fragment)\r\n\r\nexport default class CacheRoute extends Component {\r\n  static __name = 'CacheRoute'\r\n\r\n  static propTypes = {\r\n    component: PropTypes.elementType || PropTypes.any,\r\n    render: PropTypes.func,\r\n    children: PropTypes.oneOfType([PropTypes.func, PropTypes.node]),\r\n    computedMatchForCacheRoute: PropTypes.object,\r\n    multiple: PropTypes.oneOfType([PropTypes.bool, PropTypes.number]),\r\n    autoFreeze: PropTypes.bool\r\n  }\r\n\r\n  static defaultProps = {\r\n    multiple: false\r\n  }\r\n\r\n  cache = {}\r\n\r\n  render() {\r\n    let {\r\n      children,\r\n      render,\r\n      component,\r\n      className,\r\n      when,\r\n      behavior,\r\n      cacheKey,\r\n      unmount,\r\n      saveScrollPosition,\r\n      computedMatchForCacheRoute,\r\n      multiple,\r\n      autoFreeze,\r\n      ...restProps\r\n    } = this.props\r\n\r\n    /**\r\n     * Note:\r\n     * If children prop is a React Element, define the corresponding wrapper component for supporting multiple children\r\n     *\r\n     * 说明：如果 children 属性是 React Element 则定义对应的包裹组件以支持多个子组件\r\n     */\r\n    if (React.isValidElement(children) || !isEmptyChildren(children)) {\r\n      render = () => children\r\n    }\r\n\r\n    if (computedMatchForCacheRoute) {\r\n      restProps.computedMatch = computedMatchForCacheRoute\r\n    }\r\n\r\n    if (multiple && !isFragmentable) {\r\n      multiple = false\r\n    }\r\n\r\n    if (isNumber(multiple)) {\r\n      multiple = clamp(multiple, 1)\r\n    }\r\n\r\n    return (\r\n      /**\r\n       * Only children prop of Route can help to control rendering behavior\r\n       * 只有 Router 的 children 属性有助于主动控制渲染行为\r\n       */\r\n      <Route {...restProps}>\r\n        {props => {\r\n          const { match, computedMatch, location } = props\r\n          const isMatchCurrentRoute = isMatch(props.match)\r\n          const { pathname: currentPathname, search: currentSearch } = location\r\n          const maxMultipleCount = isNumber(multiple) ? multiple : Infinity\r\n          const configProps = {\r\n            when,\r\n            className,\r\n            behavior,\r\n            cacheKey,\r\n            unmount,\r\n            saveScrollPosition\r\n          }\r\n\r\n          const renderSingle = props => (\r\n            <CacheComponent {...props}>\r\n              {cacheLifecycles => (\r\n                <Updatable when={isMatch(props.match)} autoFreeze={autoFreeze}>\r\n                  {() => {\r\n                    Object.assign(props, { cacheLifecycles })\r\n\r\n                    if (component) {\r\n                      return React.createElement(component, props)\r\n                    }\r\n\r\n                    return run(render || children, undefined, props)\r\n                  }}\r\n                </Updatable>\r\n              )}\r\n            </CacheComponent>\r\n          )\r\n\r\n          if (multiple && isMatchCurrentRoute) {\r\n            const multipleCacheKey = currentPathname + currentSearch\r\n            this.cache[multipleCacheKey] = {\r\n              updateTime: Date.now(),\r\n              href: multipleCacheKey,\r\n              pathname: currentPathname,\r\n              render: renderSingle\r\n            }\r\n\r\n            Object.entries(this.cache)\r\n              .sort(([, prev], [, next]) => next.updateTime - prev.updateTime)\r\n              .forEach(([multipleCacheKey], idx) => {\r\n                if (idx >= maxMultipleCount) {\r\n                  delete this.cache[multipleCacheKey]\r\n                }\r\n              })\r\n          }\r\n\r\n          return multiple ? (\r\n            <Fragment>\r\n              {Object.entries(this.cache).map(([multipleCacheKey, { render, href, pathname }]) => {\r\n                const recomputedMatch =\r\n                  multipleCacheKey === currentPathname + currentSearch ? match || computedMatch : null\r\n\r\n                return (\r\n                  <Fragment key={multipleCacheKey}>\r\n                    {render({\r\n                      ...props,\r\n                      ...configProps,\r\n                      cacheKey,\r\n                      pathname,\r\n                      href,\r\n                      multiple: true,\r\n                      key: multipleCacheKey,\r\n                      match: recomputedMatch\r\n                    })}\r\n                  </Fragment>\r\n                )\r\n              })}\r\n            </Fragment>\r\n          ) : (\r\n            renderSingle({\r\n              ...props,\r\n              ...configProps,\r\n              pathname: currentPathname,\r\n              href: currentPathname,\r\n              multiple: false\r\n            })\r\n          )\r\n        }}\r\n      </Route>\r\n    )\r\n  }\r\n}\r\n","import React, { PropTypes, Fragment } from 'react'\n\nimport { isExist } from '../helpers'\n\nfunction getFragment() {\n  if (isExist(Fragment)) {\n    return ({ children }) => <Fragment>{children}</Fragment>\n  }\n\n  if (isExist(PropTypes)) {\n    return ({ children }) => <div>{children}</div>\n  }\n\n  return ({ children }) => children\n}\n\nconst SwitchFragment = getFragment()\nSwitchFragment.displayName = 'SwitchFragment'\n\nexport default SwitchFragment\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  Switch,\n  matchPath,\n  withRouter,\n  useHistory,\n  __RouterContext\n} from 'react-router-dom'\n\nimport { COMPUTED_UNMATCH_KEY, isMatch } from '../core/CacheComponent'\nimport Updatable from '../core/Updatable'\nimport SwitchFragment from './SwitchFragment'\nimport { get, isNull, isExist } from '../helpers'\n\nconst isUsingNewContext = isExist(__RouterContext) || isExist(useHistory)\n\nclass CacheSwitch extends Switch {\n  getContext = () => {\n    if (isUsingNewContext) {\n      const { location, match } = this.props\n\n      return { location, match }\n    } else {\n      const { route } = this.context.router\n      const location = this.props.location || route.location\n\n      return {\n        location,\n        match: route.match\n      }\n    }\n  }\n\n  render() {\n    const { children, which, autoFreeze } = this.props\n    const { location, match: contextMatch } = this.getContext()\n\n    let __matchedAlready = false\n\n    return (\n      <Updatable when={isMatch(contextMatch)} autoFreeze={autoFreeze}>\n        {() => (\n          <SwitchFragment>\n            {React.Children.map(children, element => {\n              if (!React.isValidElement(element)) {\n                return null\n              }\n\n              const path = element.props.path || element.props.from\n              const match = __matchedAlready\n                ? null\n                : path\n                  ? matchPath(\n                      location.pathname,\n                      {\n                        ...element.props,\n                        path\n                      },\n                      contextMatch\n                    )\n                  : contextMatch\n\n              let child\n\n              if (which(element)) {\n                child = React.cloneElement(element, {\n                  location,\n                  computedMatch: match,\n                  /**\n                   * https://github.com/ReactTraining/react-router/blob/master/packages/react-router/modules/Route.js#L57\n                   *\n                   * Note:\n                   * Route would use computedMatch as its next match state ONLY when computedMatch is a true value\n                   * So here we have to do some trick to let the unmatch result pass Route's computedMatch check\n                   *\n                   * 注意：只有当 computedMatch 为真值时，Route 才会使用 computedMatch 作为其下一个匹配状态\n                   * 所以这里我们必须做一些手脚，让 unmatch 结果通过 Route 的 computedMatch 检查\n                   */\n                  ...(isNull(match)\n                    ? {\n                        computedMatchForCacheRoute: {\n                          [COMPUTED_UNMATCH_KEY]: true\n                        }\n                      }\n                    : null)\n                })\n              } else {\n                child =\n                  match && !__matchedAlready\n                    ? React.cloneElement(element, {\n                        location,\n                        computedMatch: match\n                      })\n                    : null\n              }\n\n              if (!__matchedAlready) {\n                __matchedAlready = !!match\n              }\n\n              return child\n            })}\n          </SwitchFragment>\n        )}\n      </Updatable>\n    )\n  }\n}\n\nif (isUsingNewContext) {\n  CacheSwitch.propTypes = {\n    children: PropTypes.node,\n    location: PropTypes.object.isRequired,\n    match: PropTypes.object.isRequired,\n    which: PropTypes.func\n  }\n\n  CacheSwitch = withRouter(CacheSwitch)\n} else {\n  CacheSwitch.contextTypes = {\n    router: PropTypes.shape({\n      route: PropTypes.object.isRequired\n    }).isRequired\n  }\n\n  CacheSwitch.propTypes = {\n    children: PropTypes.node,\n    location: PropTypes.object,\n    which: PropTypes.func\n  }\n}\n\nCacheSwitch.defaultProps = {\n  which: element => get(element, 'type.__name') === 'CacheRoute'\n}\n\nexport default CacheSwitch\n"],"names":["isUndefined","val","isNull","isFunction","isString","isExist","isArray","Array","isNaN","isNumber","get","obj","keys","defaultValue","String","result","split","reduce","res","key","e","run","args","func","context","slice","call","value","values","nextValue","undefined","getImplementation","self","window","global","Error","implementation","getGlobal","Math","globalThis","flatten","array","item","clamp","min","max","Number","MAX_VALUE","ObjectValues","object","push","body","root","screenScrollingElement","isScrollableNode","node","scrollWidth","clientWidth","scrollHeight","clientHeight","getScrollableNodes","from","filter","saveScrollPosition","nodes","Set","map","saver","scrollLeft","scrollTop","revert","forEach","x","y","__components","getCachedComponentEntries","Object","entries","cache","CacheComponent","state","cached","some","getCache","register","component","remove","dropComponent","dropByCacheKey","refreshComponent","refreshByCacheKey","clearCache","getCachingKeys","getCachingComponents","pathname","createContext","Provider","Consumer","useCacheRoute","lifecycleName","effect","useContext","effectRef","useRef","current","cacheLifecycles","off","useDidCache","bind","useDidRecover","isUsingNewLifecycle","React","forwardRef","COMPUTED_UNMATCH_KEY","isMatch","match","getDerivedStateFromProps","nextProps","prevState","nextPropsMatch","when","matched","nextAction","__cancel__cache","includes","props","eventName","id","random","listenerKey","__listener","listener","componentWillReceiveProps","nextState","setState","injectDOM","__parentNode","wrapper","__placeholderNode","err","ejectDOM","parentNode","reset","__revertScrollPos","refresh","__cacheCreateTime","Date","now","__cacheUpdateTime","cacheKey","multiple","href","manager","document","createComment","prevProps","unmount","__didCacheListener","__didRecoverListener","willRecover","willDrop","shouldUpdate","length","className","propsClassName","behavior","children","behaviorClassName","behaviorProps","hasClassName","Component","__name","propsTypes","PropTypes","isRequired","string","oneOfType","oneOf","bool","defaultProps","isSupported","lazy","Suspense","notSupportSuspense","Suspender","promiseCache","freeze","promise","Promise","resolve","Freeze","placeholder","isSusSupported","ReactFreeze","DelayFreeze","freezeTimeout","shouldComponentUpdate","currentFreeze","setTimeout","render","Updatable","autoFreeze","isEmptyChildren","Children","count","isFragmentable","Fragment","CacheRoute","computedMatchForCacheRoute","restProps","isValidElement","computedMatch","location","isMatchCurrentRoute","currentPathname","currentSearch","search","maxMultipleCount","Infinity","configProps","renderSingle","assign","createElement","multipleCacheKey","sort","prev","next","updateTime","idx","recomputedMatch","propTypes","elementType","any","number","getFragment","SwitchFragment","displayName","isUsingNewContext","__RouterContext","useHistory","CacheSwitch","getContext","route","router","which","contextMatch","__matchedAlready","element","path","matchPath","child","cloneElement","Switch","withRouter","contextTypes","shape"],"mappings":"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"}